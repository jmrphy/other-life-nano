---
description: 
globs: 
alwaysApply: true
---
# Project Conventions for Image Handling in Astro

This project uses Astro. Here's how images are handled:

## Image Locations

*   **`src/` directory (Default for Blog Posts & Recommended):** Store images here for optimization by Astro. **For blog posts, the default is to colocate images** in a subdirectory next to the post (e.g., `src/content/blog/post-name/images/` for a blog post at `src/content/blog/post-name/index.mdx`).
*   **`public/` directory:** Only store images here if they **must not** be processed or optimized by Astro (e.g., favicons, social sharing images). These are accessed via root-relative paths (e.g., `/my-image.png`).

## Usage in Content Files

### Markdown (`.md`)

*   Generally **avoided for blog posts** in favor of MDX for better image handling.
*   If used: standard Markdown syntax `![alt text](mdc:path/to/image.png)`.
*   For images in `src/`: `![alt text](mdc:images/image.png)`.
*   For images in `public/`: `![alt text](mdc:image.png)`.
*   Astro optimizes `src/` images; `public/` images are not optimized.
*   Cannot easily add captions or use the `FigureImage` component.

### MDX (`.mdx`)

MDX files (like `[meltdown-logistically-accelerating.mdx](mdc:src/content/blog/meltdown-logistically-accelerating.mdx)`) are the **preferred format for blog posts**.

## Blog Posts: MDX is the default

- **Always use `.mdx`** for blog posts, especially if images or components are included.
- **Do not use `.md`** for posts with images/components; components will not render in `.md`.

### Standard pattern
1. Create: `src/content/blog/[slug]/index.mdx`
2. Images in: `src/content/blog/[slug]/images/`
3. Import and use:
   ```jsx
   import FigureImage from '@/components/FigureImage.astro'
   <FigureImage 
     imageSrc={import('./images/my-local-image.png')} 
     alt="Describe the image" 
     caption="Optional <em>caption</em>"
   />
   ```
4. Frontmatter:
   ```yaml
   ---
   title: "Title"
   description: "Description"
   date: YYYY-MM-DD
   slug: "optional-custom-slug"
   ---
   ```

### Styling notes
- `FigureImage` sets `class="not-prose"` to prevent Tailwind Typography from overriding custom styles.
- Avoid wrapping `FigureImage` with additional containers that add conflicting styles.

### Markdown fallback (rare)
- Use `.md` only for text-only posts.
- If you include an image in Markdown, use `![alt](./images/image.png)`. This bypasses our `FigureImage` component (no captions/custom styles) and is not recommended for blog posts.
